---
import '@/styles/xtir-tokens.css';
import '@/styles/global.css';
import Header from '@/components/common/Header.tsx';
import Footer from '@/components/common/Footer.tsx';
interface Props {
  title: string;
  description?: string;
  image?: string;
}
const {
  title,
  description = 'XTIR — разработка и производство электронно-механического оборудования для стрельбы. Решения для тиров, полигонов и учебных комплексов.',
  image = '/images/og-image.svg',
} = Astro.props;
const PROD_CANONICAL_ORIGIN = 'https://x-tir.ru';
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const rawPath = Astro.url.pathname || '/';
const basePrefix = base && base !== '/' ? `${base}/` : '';
const normalizedPath = rawPath.startsWith(basePrefix)
  ? rawPath.slice(basePrefix.length - 1)
  : rawPath;
const canonicalURL = new URL(normalizedPath, PROD_CANONICAL_ORIGIN);
const isAbsoluteImage = /^https?:\/\//.test(image);
const cleanImagePath = image.startsWith('/') ? image : `/${image}`;
const ogImage = isAbsoluteImage
  ? image
  : new URL(cleanImagePath, PROD_CANONICAL_ORIGIN);
const faviconUrl = base + '/favicon.svg';
---
<!doctype html>
<html lang="ru" class="scroll-smooth" lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href={faviconUrl} />
    <meta name="generator" content={Astro.generator} />
    <title>{title ? `${title} | XTIR` : 'XTIR — оборудование для стрельбы'}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />
    <meta name="theme-color" content="#0F141A" />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="XTIR" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="XTIR" />
    <meta property="og:locale" content="ru_RU" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImage} />
  
<style is:global>
  /* XTIR_WOW_GLOBALS */
  /* XTIR_WOW_COMPAT */
  .wrap{ width: min(var(--xtir-max), calc(100% - 48px)); margin-inline:auto; }
  .btn-primary, .btn-ghost{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:.55rem;
    padding:.9rem 1.1rem;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    color:var(--xtir-text);
    text-decoration:none;
    box-shadow:0 10px 28px rgba(0,0,0,.25);
    transition:transform .12s ease, filter .12s ease;
    user-select:none;
  }
  .btn-primary{
    background: linear-gradient(135deg, rgba(110,231,255,.20), rgba(167,139,250,.14));
  }
  .btn-ghost{
    background: rgba(255,255,255,.04);
  }
  .btn-primary:hover, .btn-ghost:hover{ transform: translateY(-1px); filter: brightness(1.06); }
  .btn-primary:active, .btn-ghost:active{ transform: translateY(0px); filter: brightness(0.98); }
  :root{
    --xtir-bg: #0b0c0f;
    --xtir-surface: rgba(255,255,255,.04);
    --xtir-border: rgba(255,255,255,.10);
    --xtir-text: rgba(255,255,255,.92);
    --xtir-muted: rgba(255,255,255,.66);
    --xtir-accent: #6ee7ff;
    --xtir-accent2: #a78bfa;
    --xtir-radius: 18px;
    --xtir-shadow: 0 12px 40px rgba(0,0,0,.35);
    --xtir-max: 1180px;
  }

  html,body{
    background: radial-gradient(1200px 600px at 20% 0%, rgba(110,231,255,.14), transparent 60%),
                radial-gradient(900px 500px at 80% 10%, rgba(167,139,250,.10), transparent 55%),
                var(--xtir-bg);
    color: var(--xtir-text);
  }

  .xtir-container{
    width: min(var(--xtir-max), calc(100% - 48px));
    margin-inline: auto;
  }

  .xtir-card{
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border: 1px solid var(--xtir-border);
    border-radius: var(--xtir-radius);
    box-shadow: var(--xtir-shadow);
    backdrop-filter: blur(10px);
  }

  .xtir-h1{
    letter-spacing: -0.02em;
    line-height: 1.02;
  }

  .xtir-lead{
    color: var(--xtir-muted);
    line-height: 1.55;
  }

  .xtir-btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:.55rem;
    padding:.9rem 1.1rem;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.14);
    background: linear-gradient(135deg, rgba(110,231,255,.20), rgba(167,139,250,.14));
    color: var(--xtir-text);
    text-decoration:none;
    box-shadow: 0 10px 28px rgba(0,0,0,.25);
    transition: transform .12s ease, filter .12s ease;
    user-select:none;
  }
  .xtir-btn:hover{ transform: translateY(-1px); filter: brightness(1.06); }
  .xtir-btn:active{ transform: translateY(0px); filter: brightness(0.98); }

  .xtir-link{
    color: var(--xtir-accent);
    text-decoration: none;
    border-bottom: 1px dashed rgba(110,231,255,.45);
  }
  .xtir-link:hover{ border-bottom-style: solid; }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce){
    .xtir-btn{ transition:none; }
  }
</style>
</head>
  <body>
    <Header client:load />
    <slot />
    <Footer />
  </body>
</html>
<style is:global>
  @supports (scrollbar-color: auto) {
    * {
      scrollbar-width: thin;
      scrollbar-color: #0039a6 #060a0e;
    }
  }
  ::-webkit-scrollbar { width: 3px !important; }
  ::-webkit-scrollbar-track { background: #060a0e !important; }
  ::-webkit-scrollbar-thumb {
    background: linear-gradient(
      to bottom,
      #ffffff 0%, #ffffff 33%,
      #0039a6 33%, #0039a6 66%,
      #d52b1e 66%, #d52b1e 100%
    ) !important;
    border-radius: 0 !important;
  }
</style>

